# uBlock Origin形式フィルターインポート機能 ユーザーガイド

## 概要

Obsidian Smart History拡張機能のuBlock Origin形式フィルターインポート機能を使用すると、既存のuBlock Originフィルターリスト（例：EasyList）を直接インポートして、特定のWebサイトの記録をブロックまたは許可できます。

## 使い方

### 1. 設定画面へのアクセス

1. ブラウザのツールバーにあるObsidian Smart Historyアイコンをクリックします。
2. 表示されるポップアップ画面で、右上の「☰」メニューを開きます。
3. 「Settings」を選択して設定画面に移動します。

### 2. ドメインフィルタータブの選択

設定画面で「ドメインフィルター」タブを選択します。

### 3. フィルターモードの選択

以下のいずれかのモードを選択します：
- **無効**: すべてのサイトを記録します。
- **ホワイトリスト**: 指定したサイトのみを記録します。
- **ブラックリスト**: 指定したサイトを記録から除外します。

### 4. フィルター形式の選択

「フィルター形式」で「uBlock Origin 形式」を選択します。

### 5. フィルターの入力

以下の3つの方法でuBlock形式のフィルターを入力できます：

#### 方法1: テキストの直接入力
1. 「uBlockフィルター」テキストエリアに、uBlock Origin形式のフィルターを直接貼り付けます。
2. 入力すると自動的にプレビューが表示され、ルール数、例外数、エラー数が確認できます。

#### 方法2: ファイルからの読み込み
1. 「ファイルを選択」ボタンをクリックします。
2. ローカルに保存されている.txt形式のフィルターリストを選択します。
3. ファイルが読み込まれ、テキストエリアに内容が表示されます。

#### 方法3: ドラッグ＆ドロップ
1. ファイルを「ファイルをここにドロップ」と表示されている領域にドラッグ＆ドロップします。
2. ファイルが読み込まれ、テキストエリアに内容が表示されます。

#### 方法4: URLからの読み込み
1. 「URLから読み込み」の入力欄に、フィルターリストのURLを入力します。
2. 「URLからインポート」ボタンをクリックします。
3. 指定したURLからフィルターがダウンロードされ、テキストエリアに内容が表示されます。

### 6. フィルターのプレビュー

入力したフィルターはリアルタイムでプレビューされ、以下の情報が表示されます：
- **ルール数**: ブロックするドメインの数
- **例外数**: 許可するドメインの数
- **エラー**: フィルターの構文エラーの数と詳細

### 7. エクスポート機能

既存のuBlockフィルターをエクスポートできます：
- **エクスポート**: 現在のフィルターを.txtファイルとしてダウンロードします。
- **クリップボードにコピー**: 現在のフィルターをクリップボードにコピーします。

### 8. 設定の保存

「保存」ボタンをクリックして、入力したフィルターを保存します。

## サポートされているuBlock構文

以下のuBlock Origin構文がサポートされています：

| 構文 | 説明 | 例 |
|------|------|-----|
| `||hostname^` | ドメインと全サブドメインをブロック | `||example.com^` |
| `@@||hostname^` | 例外ルール（ブロックを解除） | `@@||trusted.com^` |
| `*` | ワイルドカード | `||*.ads.net^` |
| `!` | コメント | `! Comment` |
| `$domain=` | 特定ドメインに制限 | `||tracker.com$domain=example.com` |
| `$~domain=` | ドメインを除外 | `||tracker.com$domain=~trusted.com` |
| `$3p` | サードパーティのみ | `||ad.com$3p` |
| `$1p` | ファーストパーティのみ | `||script.com$1p` |
| `$important` | 重要マーク（他のルールより優先） | `||analytics.com$important` |

## 注意事項

- ファイルの文字エンコーディングはUTF-8であることを推奨します。
- フィルターにエラーがある場合、保存前に修正してください。
- プレビューでエラーが表示された場合でも、有効なルールは正常に機能します。
- 大きなフィルターリストの読み込みには時間がかかる場合があります。