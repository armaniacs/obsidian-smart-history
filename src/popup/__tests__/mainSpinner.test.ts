/**
 * UF-403 ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
 *
 * Refactorãƒ•ã‚§ãƒ¼ã‚º: æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸspinner.jsã‹ã‚‰importã—ãŸé–¢æ•°ã®å‹•ä½œã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
 * showSpinner()ã€hideSpinner()é–¢æ•°ã«ã‚ˆã‚‹DOMæ“ä½œã‚’å˜ä½“ã§ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚
 */

import { describe, test, expect, beforeEach, afterEach } from '@jest/globals.js';
import { jest } from '@jest/globals.js';

// Mock i18n before importing spinner.js
jest.mock('../i18n.js', () => ({
  getMessage: jest.fn((key, substitutions) => {
    if (key === 'processing') return 'å‡¦ç†ä¸­...';
    if (key === 'countdownNumber' && substitutions?.count !== undefined) return `${substitutions.count}...`;
    if (key === 'autoClosing') return 'è‡ªå‹•é–‰ã˜ã‚‹';
    return key;
  })
}));

import { showSpinner, hideSpinner } from '../spinner.js';

describe('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼åˆ¶å¾¡', () => {
  // ã€ãƒ†ã‚¹ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã®ç›®çš„ã€‘: showSpinnerã€hideSpinneré–¢æ•°ã®å‹•ä½œã‚’æ¤œè¨¼
  // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: ã‚¹ãƒ”ãƒŠãƒ¼è¡¨ç¤ºã€éè¡¨ç¤ºã€ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ

  beforeEach(() => {
    // ã€ãƒ†ã‚¹ãƒˆå‰æº–å‚™ã€‘: å„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’åˆæœŸåŒ–
    // ã€ç’°å¢ƒåˆæœŸåŒ–ã€‘: DOMã‚’ã‚¹ãƒ”ãƒŠãƒ¼è¦ç´ ã‚’å«ã‚€çŠ¶æ…‹ã«ã™ã‚‹
    document.body.innerHTML = `
      <div id="loadingSpinner" class="spinner-container" style="display: none;">
        <svg class="spinner" viewBox="0 0 50 50">
          <circle
            class="spinner-path"
            cx="25" cy="25" r="20"
            fill="none"
            stroke="#4CAF50"
            stroke-width="4"
            stroke-linecap="round"
          />
        </svg>
        <span class="spinner-text"></span>
      </div>
    `;

    // Clear all mocks before each test
    jest.clearAllMocks();

    // ã€ãƒ¢ãƒƒã‚¯ã‚­ãƒ£ãƒ—ãƒãƒ£ã€‘: console.warnã®å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ãƒ¢ãƒƒã‚¯ã‚’è¨­å®š
    // @ts-expect-error - jest.fn() type narrowing issue
  
    jest.spyOn(console, 'warn').mockImplementation(() => {});
  });

  afterEach(() => {
    // ã€ãƒ†ã‚¹ãƒˆå¾Œå‡¦ç†ã€‘: console.warnã®ãƒ¢ãƒƒã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆ
    jest.restoreAllMocks();
  });

  test('showSpinner()å‘¼ã³å‡ºã—ã§ã‚¹ãƒ”ãƒŠãƒ¼è¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: showSpinneré–¢æ•°ã®åŸºæœ¬å‹•ä½œã‚’ç¢ºèª
    // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: showSpinner()å‘¼ã³å‡ºã—ã«ã‚ˆã‚Šã‚¹ãƒ”ãƒŠãƒ¼è¦ç´ ã®displayãŒflexã«å¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆ
    // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºçŠ¶æ…‹ã«ãªã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã‚‹ã“ã¨
    // ğŸŸ¢ è¦ä»¶å®šç¾©ï¼ˆloading-spinner-requirements.md 186-196è¡Œç›®ï¼‰ã«åŸºã¥ãä»•æ§˜ãŒæ˜ç¢º

    const spinner = document.getElementById('loadingSpinner');
    expect(spinner.style.display).toBe('none'); // ã€å‰ææ¡ä»¶ç¢ºèªã€‘: åˆæœŸçŠ¶æ…‹ã§éè¡¨ç¤º

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: showSpinneré–¢æ•°ã‚’å‘¼ã³å‡ºã—
    // ã€å‡¦ç†å†…å®¹ã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ã‚’è¡¨ç¤ºçŠ¶æ…‹ã«ã—ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®šã™ã‚‹
    showSpinner('å‡¦ç†ä¸­...');

    // ã€çµæœæ¤œè¨¼ã€‘: DOMæ“ä½œã®çµæœã‚’ç¢ºèª
    expect(spinner.style.display).toBe('flex'); // ã€ç¢ºèªå†…å®¹ã€‘: displayãŒflexã«å¤‰æ›´ã•ã‚ŒãŸã“ã¨
    expect(spinner.querySelector('.spinner-text').textContent).toBe('å‡¦ç†ä¸­...'); // ã€ç¢ºèªå†…å®¹ã€‘: ãƒ†ã‚­ã‚¹ãƒˆãŒè¨­å®šã•ã‚ŒãŸã“ã¨
  });

  test('showSpinner()ã§ãƒ†ã‚­ã‚¹ãƒˆå¼•æ•°ã‚’æ¸¡ã—ã¦è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°ã§ãã‚‹', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°æ©Ÿèƒ½ã®ç¢ºèª
    // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: å¼•æ•°ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°ã‚’ãƒ†ã‚¹ãƒˆ
    // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: æŒ‡å®šã—ãŸãƒ†ã‚­ã‚¹ãƒˆãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
    // ğŸŸ¢ è¦ä»¶å®šç¾©ï¼ˆ7.3ç¯€ APIä»•æ§˜ï¼‰ã«åŸºã¥ãä»•æ§˜ãŒæ˜ç¢º

    const spinner = document.getElementById('loadingSpinner');

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: ãƒ†ã‚­ã‚¹ãƒˆå¼•æ•°ã‚’æŒ‡å®šã—ã¦å‘¼ã³å‡ºã—
    // ã€å‡¦ç†å†…å®¹ã€‘: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­ã‚’è¡¨ã™ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
    showSpinner('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­...');

    // ã€çµæœæ¤œè¨¼ã€‘: æ­£ã—ã„å¼•æ•°ã§å‘¼ã°ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    expect(spinner.style.display).toBe('flex'); // ã€ç¢ºèªå†…å®¹ã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨
    expect(spinner.querySelector('.spinner-text').textContent).toBe('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­...'); // ã€ç¢ºèªå†…å®¹ã€‘: æ­£ã—ã„ãƒ†ã‚­ã‚¹ãƒˆãŒè¨­å®šã•ã‚ŒãŸã“ã¨
  });

  test('showSpinner()å¼•æ•°çœç•¥æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã®å‹•ä½œç¢ºèª
    // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: å¼•æ•°ã‚’çœç•¥ã—ãŸå ´åˆã®å‹•ä½œã‚’ãƒ†ã‚¹ãƒˆ
    // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° 'å‡¦ç†ä¸­...' ãŒä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨
    // ğŸŸ¢ è¦ä»¶å®šç¾©ï¼ˆ191è¡Œç›®ï¼‰ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒä»•æ§˜ã¨ã—ã¦å®šç¾©

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: å¼•æ•°ãªã—ã§å‘¼ã³å‡ºã—
    // ã€å‡¦ç†å†…å®¹ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•° 'å‡¦ç†ä¸­...' ãŒä½¿ç”¨ã•ã‚Œã‚‹
    showSpinner();

    const spinner = document.getElementById('loadingSpinner');
    expect(spinner.style.display).toBe('flex'); // ã€ç¢ºèªå†…å®¹ã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨
    expect(spinner.querySelector('.spinner-text').textContent).toBe('å‡¦ç†ä¸­...'); // ã€ç¢ºèªå†…å®¹ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸã“ã¨
  });

  test('hideSpinner()å‘¼ã³å‡ºã—ã§ã‚¹ãƒ”ãƒŠãƒ¼è¦ç´ ãŒéè¡¨ç¤ºã«ãªã‚‹', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: hideSpinneré–¢æ•°ã®åŸºæœ¬å‹•ä½œã‚’ç¢ºèª
    // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: displayãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒnoneã«å¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆ
    // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ãŒéè¡¨ç¤ºçŠ¶æ…‹ã«ãªã‚‹ã“ã¨
    // ğŸŸ¢ è¦ä»¶å®šç¾©ï¼ˆ201-204è¡Œç›®ï¼‰ã«åŸºã¥ãä»•æ§˜ãŒæ˜ç¢º

    const spinner = document.getElementById('loadingSpinner');
    spinner.style.display = 'flex'; // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: è¡¨ç¤ºçŠ¶æ…‹ã«è¨­å®š

    expect(spinner.style.display).toBe('flex'); // ã€å‰ææ¡ä»¶ç¢ºèªã€‘: åˆæœŸçŠ¶æ…‹ã§è¡¨ç¤ºä¸­

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: hideSpinneré–¢æ•°ã‚’å‘¼ã³å‡ºã—
    // ã€å‡¦ç†å†…å®¹ã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ã‚’éè¡¨ç¤ºçŠ¶æ…‹ã«ã™ã‚‹
    hideSpinner();

    // ã€çµæœæ¤œè¨¼ã€‘: DOMæ“ä½œã®çµæœã‚’ç¢ºèª
    expect(spinner.style.display).toBe('none'); // ã€ç¢ºèªå†…å®¹ã€‘: displayãŒnoneã«å¤‰æ›´ã•ã‚ŒãŸã“ã¨
  });

  test('showSpinner - DOMè¦ç´ ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è­¦å‘Šã‚’å‡ºåŠ›ã™ã‚‹', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: DOMè¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®æŒ™å‹•ã‚’ç¢ºèª
    // ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: document.getElementByIdãŒnullã‚’è¿”ã™ã‚±ãƒ¼ã‚¹
    // ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: DOMæ§‹æˆã‚¨ãƒ©ãƒ¼ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
    // ğŸŸ¡ è¦ä»¶å®šç¾©ã«DOMè¦ç´ å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã®æ˜ç¤ºãªã—ã€å®Ÿè£…æ™‚ã«è¿½åŠ 

    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: DOMã‹ã‚‰loadingSpinnerè¦ç´ ã‚’å‰Šé™¤
    document.body.innerHTML = '';

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: è¦ç´ ãŒãªã„çŠ¶æ…‹ã§showSpinnerã‚’å‘¼ã³å‡ºã—
    expect(() => {
      showSpinner('å‡¦ç†ä¸­...');
    }).not.toThrow(); // ã€ç¢ºèªå†…å®¹ã€‘: ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œãªã„ã“ã¨ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ¸ˆã¿ï¼‰

    // ã€çµæœæ¤œè¨¼ã€‘: console.warnãŒå‘¼ã°ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    expect(console.warn).toHaveBeenCalledWith('loadingSpinner element not found'); // ã€ç¢ºèªå†…å®¹ã€‘: é©åˆ‡ãªè­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚ŒãŸã“ã¨
  });

  test('hideSpinner - DOMè¦ç´ ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è­¦å‘Šã‚’å‡ºåŠ›ã™ã‚‹', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: DOMè¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã®æŒ™å‹•ã‚’ç¢ºèª
    // ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: document.getElementByIdãŒnullã‚’è¿”ã™ã‚±ãƒ¼ã‚¹
    // ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: DOMæ§‹æˆã‚¨ãƒ©ãƒ¼ã‚’æ¤œçŸ¥
    // ğŸŸ¡ è¦ä»¶å®šç¾©ã«DOMè¦ç´ å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã®æ˜ç¤ºãªã—ã€å®Ÿè£…æ™‚ã«è¿½åŠ 

    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: DOMã‹ã‚‰loadingSpinnerè¦ç´ ã‚’å‰Šé™¤
    document.body.innerHTML = '';

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: è¦ç´ ãŒãªã„çŠ¶æ…‹ã§hideSpinnerã‚’å‘¼ã³å‡ºã—
    expect(() => {
      hideSpinner();
    }).not.toThrow(); // ã€ç¢ºèªå†…å®¹ã€‘: ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œãªã„ã“ã¨ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ¸ˆã¿ï¼‰

    // ã€çµæœæ¤œè¨¼ã€‘: console.warnãŒå‘¼ã°ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    expect(console.warn).toHaveBeenCalledWith('loadingSpinner element not found'); // ã€ç¢ºèªå†…å®¹ã€‘: é©åˆ‡ãªè­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚ŒãŸã“ã¨
  });

  test('showSpinnerã‚’è¤‡æ•°å›å‘¼ã³å‡ºã—ãŸå ´åˆã®æŒ™å‹•', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: è¤‡æ•°å›å‘¼ã³å‡ºã—ã®å‹•ä½œã‚’ç¢ºèª
    // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: é€£ç¶šã—ã¦é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸå ´åˆã®æŒ™å‹•ã‚’ç¢ºèª
    // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: æœ€æ–°ã®ãƒ†ã‚­ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã‚‹ã“ã¨
    // ğŸŸ¢ é–¢æ•°å‘¼ã³å‡ºã—ã®æ­£è¦æŒ™å‹•ç¢ºèª

    const spinner = document.getElementById('loadingSpinner');

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: é€£ç¶šã—ã¦å‘¼ã³å‡ºã—
    showSpinner('å‡¦ç†ä¸­...');
    expect(spinner.querySelector('.spinner-text').textContent).toBe('å‡¦ç†ä¸­...');

    showSpinner('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­...');
    expect(spinner.querySelector('.spinner-text').textContent).toBe('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­...');

    showSpinner('ä¿å­˜ä¸­...');
    expect(spinner.querySelector('.spinner-text').textContent).toBe('ä¿å­˜ä¸­...');

    // ã€çµæœæ¤œè¨¼ã€‘: æœ€å¾Œã®å‘¼ã³å‡ºã—ã®çŠ¶æ…‹ãŒç¶­æŒã•ã‚Œã¦ã„ã‚‹ã“ã¨
    expect(spinner.style.display).toBe('flex'); // ã€ç¢ºèªå†…å®¹ã€‘: ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨
    expect(spinner.querySelector('.spinner-text').textContent).toBe('ä¿å­˜ä¸­...'); // ã€ç¢ºèªå†…å®¹ã€‘: æœ€æ–°ã®ãƒ†ã‚­ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
  });

  test('showSpinnerã¨hideSpinnerã®çµ„ã¿åˆã‚ã›å‹•ä½œ', () => {
    // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: è¡¨ç¤ºã¨éè¡¨ç¤ºã®çµ„ã¿åˆã‚ã›å‹•ä½œã‚’ç¢ºèª
    // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: showSpinnerã¨hideSpinnerã‚’é€£ç¶šã—ã¦å‘¼ã³å‡ºã™å‹•ä½œã‚’ãƒ†ã‚¹ãƒˆ
    // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: å„æ“ä½œãŒæ­£ã—ãåæ˜ ã•ã‚Œã‚‹ã“ã¨
    // ğŸŸ¢ æ­£å¸¸ãªãƒ•ãƒ­ãƒ¼ã«ãŠã‘ã‚‹é–¢æ•°å‘¼ã³å‡ºã—é †åºç¢ºèª

    const spinner = document.getElementById('loadingSpinner');

    // ã€ãƒ†ã‚¹ãƒˆå‰ã€‘: åˆæœŸçŠ¶æ…‹ã‚’ç¢ºèª
    expect(spinner.style.display).toBe('none'); // ã€ç¢ºèªå†…å®¹ã€‘: éè¡¨ç¤ºçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨

    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: è¡¨ç¤ºã¨éè¡¨ç¤ºã‚’ç¹°ã‚Šè¿”ã™
    showSpinner('å‡¦ç†ä¸­...');
    expect(spinner.style.display).toBe('flex'); // ã€ç¢ºèªå†…å®¹ã€‘: 1å›ç›®: è¡¨ç¤ºçŠ¶æ…‹ã«ãªã£ãŸã“ã¨
    expect(spinner.querySelector('.spinner-text').textContent).toBe('å‡¦ç†ä¸­...');

    hideSpinner();
    expect(spinner.style.display).toBe('none'); // ã€ç¢ºèªå†…å®¹ã€‘: éè¡¨ç¤ºçŠ¶æ…‹ã«ãªã£ãŸã“ã¨

    showSpinner('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­...');
    expect(spinner.style.display).toBe('flex'); // ã€ç¢ºèªå†…å®¹ã€‘: 2å›ç›®: å†è¡¨ç¤ºã•ã‚ŒãŸã“ã¨
    expect(spinner.querySelector('.spinner-text').textContent).toBe('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—ä¸­...');

    hideSpinner();
    expect(spinner.style.display).toBe('none'); // ã€ç¢ºèªå†…å®¹ã€‘: æœ€çµ‚çš„ã«éè¡¨ç¤ºçŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨
  });
});